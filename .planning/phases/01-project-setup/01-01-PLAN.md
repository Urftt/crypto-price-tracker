---
phase: 01-project-setup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - pyproject.toml
  - src/crypto_tracker/__init__.py
  - src/crypto_tracker/cli.py
  - .python-version
autonomous: true
requirements:
  - SETUP-01
  - SETUP-02

must_haves:
  truths:
    - "Running `uv sync` installs the project and all dependencies without error"
    - "Running `crypto --help` prints usage information listing prices, watch, and info subcommands"
    - "Running `crypto prices` exits without error (exit code 0)"
    - "No setup.py, setup.cfg, or requirements.txt exists in the project root"
  artifacts:
    - path: "pyproject.toml"
      provides: "Project metadata, build system, and entry point configuration"
      contains: "[project.scripts]"
      min_lines: 10
    - path: "src/crypto_tracker/__init__.py"
      provides: "Package init with version string"
      contains: "__version__"
      min_lines: 1
    - path: "src/crypto_tracker/cli.py"
      provides: "CLI entry point with argparse subcommands and main() function"
      exports: ["main"]
      min_lines: 15
    - path: ".python-version"
      provides: "Python version pin for uv"
      contains: "3.12"
  key_links:
    - from: "pyproject.toml"
      to: "src/crypto_tracker/cli.py"
      via: "[project.scripts] crypto entry point"
      pattern: 'crypto\s*=\s*"crypto_tracker\.cli:main"'
    - from: "src/crypto_tracker/cli.py"
      to: "argparse"
      via: "CLI framework import"
      pattern: "import argparse"
    - from: "pyproject.toml"
      to: "hatchling"
      via: "[build-system] backend"
      pattern: "hatchling"
---

<objective>
Scaffold a uv-managed Python project with pyproject.toml and a minimal CLI skeleton so that `crypto --help` works after `uv sync`.

Purpose: Establish the installable project foundation that all subsequent phases build on. Without this, there is no command to extend with API integration or subcommand logic.
Output: A working `crypto` command installed via `uv sync` that responds to `--help` and has placeholder subcommands for `prices`, `watch`, and `info`.
</objective>

<execution_context>
@/home/james-turing/.claude/get-shit-done/workflows/execute-plan.md
@/home/james-turing/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Key decisions from PROJECT.md:
- Python 3.12+ runtime
- uv with pyproject.toml (no setup.py, no requirements.txt)
- Minimal dependencies: CLI framework, HTTP client, table renderer
- Entry point command: `crypto`
- Subcommands: `prices`, `watch`, `info` (wired in Phase 3, but CLI skeleton should use argparse with subparsers so they can be added later)
- src layout: `src/crypto_tracker/`
- Build backend: hatchling
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create pyproject.toml, package init, and Python version pin</name>
  <files>pyproject.toml, src/crypto_tracker/__init__.py, .python-version</files>
  <action>
Create the uv-managed project scaffold with three files:

1. Create `.python-version` containing exactly `3.12` (single line, no trailing content). This pins the Python version for uv.

2. Create `pyproject.toml` with these exact sections:
   - `[project]`: name = "crypto-price-tracker", version = "0.1.0", description = "Terminal crypto price tracker using Bitvavo API", requires-python = ">=3.12", dependencies = []
   - `[project.scripts]`: crypto = "crypto_tracker.cli:main" — this is the installable entry point that makes `crypto` a command
   - `[build-system]`: requires = ["hatchling"], build-backend = "hatchling.backends"
   - `[tool.hatch.build.targets.wheel]`: packages = ["src/crypto_tracker"]

3. Create directory `src/crypto_tracker/` and add `__init__.py` with:
   ```python
   __version__ = "0.1.0"
   ```

Use the src layout (`src/crypto_tracker/`) so the package is cleanly separated from project root files.

Do NOT create setup.py, setup.cfg, or requirements.txt. Do NOT add any dependencies yet — this phase is scaffold only. The empty dependencies list is intentional; httpx, rich, etc. will be added in Phase 2 and 3.
  </action>
  <verify>
    <automated>cd /home/james-turing/repos/crypto-price-tracker-v2 && test -f pyproject.toml && test -f src/crypto_tracker/__init__.py && test -f .python-version && grep -q "project.scripts" pyproject.toml && grep -q 'crypto = "crypto_tracker.cli:main"' pyproject.toml && grep -q "__version__" src/crypto_tracker/__init__.py && grep -q "3.12" .python-version && ! test -f setup.py && ! test -f requirements.txt && ! test -f setup.cfg && echo "PASS"</automated>
  </verify>
  <done>pyproject.toml exists with [project.scripts] entry point mapping crypto to crypto_tracker.cli:main, src/crypto_tracker/__init__.py exists with __version__, .python-version pins 3.12, no setup.py/setup.cfg/requirements.txt present</done>
</task>

<task type="auto">
  <name>Task 2: Create CLI entry point with argparse subcommands and verify installation</name>
  <files>src/crypto_tracker/cli.py</files>
  <action>
1. Create `src/crypto_tracker/cli.py` with a `main()` function:

   ```python
   import argparse
   import sys


   def main():
       parser = argparse.ArgumentParser(
           prog="crypto",
           description="Cryptocurrency price tracker — Bitvavo API, EUR prices",
       )
       subparsers = parser.add_subparsers(dest="command")

       # prices subcommand
       subparsers.add_parser("prices", help="Display top cryptocurrency prices")

       # watch subcommand
       watch_parser = subparsers.add_parser("watch", help="Watch prices with auto-refresh")
       watch_parser.add_argument(
           "--interval",
           type=int,
           default=30,
           help="Refresh interval in seconds (default: 30)",
       )

       # info subcommand
       info_parser = subparsers.add_parser("info", help="Show detailed info for a coin")
       info_parser.add_argument("symbol", help="Coin symbol (e.g. BTC, ETH)")

       args = parser.parse_args()

       if args.command is None:
           parser.print_help()
           sys.exit(0)

       # Placeholder — subcommands will be implemented in Phase 3
       print(f"Command '{args.command}' is not yet implemented.")
   ```

   Key points:
   - Only stdlib imports (argparse, sys). No external packages.
   - Three subparsers: `prices` (no args), `watch` (--interval), `info` (positional symbol).
   - No-subcommand case prints help and exits cleanly.
   - Placeholder message for unimplemented subcommands (does not raise, does not crash).

2. Run `uv sync` to install the project in dev mode. This should complete without errors and make the `crypto` command available.

3. Verify the installation by running:
   - `crypto --help` — should print usage showing prices, watch, info subcommands
   - `crypto prices` — should print placeholder message, exit 0
   - `crypto watch --help` — should show --interval option
   - `crypto info --help` — should show symbol argument
   - `crypto info BTC` — should print placeholder message, exit 0
  </action>
  <verify>
    <automated>cd /home/james-turing/repos/crypto-price-tracker-v2 && uv sync 2>&1 && crypto --help 2>&1 | grep -q "prices" && crypto --help 2>&1 | grep -q "watch" && crypto --help 2>&1 | grep -q "info" && crypto prices 2>&1 && crypto watch --help 2>&1 | grep -q "interval" && crypto info BTC 2>&1 && echo "ALL PASS"</automated>
  </verify>
  <done>`uv sync` completes without error, `crypto --help` shows usage listing prices/watch/info subcommands, `crypto prices` exits cleanly with placeholder output, `crypto watch --help` shows --interval option with default 30, `crypto info BTC` exits cleanly with placeholder output</done>
</task>

</tasks>

<verification>
After both tasks complete, verify the full Phase 1 success criteria:

1. `uv sync` installs without error (SETUP-01)
2. `crypto --help` shows usage with three subcommands (SETUP-02)
3. pyproject.toml has `[project.scripts]` entry point, no setup.py or requirements.txt (SETUP-01)
4. All subcommands exit without tracebacks (SETUP-02)

Run the combined check:
```bash
cd /home/james-turing/repos/crypto-price-tracker-v2
uv sync 2>&1 | tail -3
crypto --help
crypto prices
crypto watch --help
crypto info --help
crypto info BTC
echo "---"
test ! -f setup.py && test ! -f requirements.txt && echo "No legacy files: PASS"
grep -q 'crypto = "crypto_tracker.cli:main"' pyproject.toml && echo "Entry point: PASS"
```

All commands should exit 0 with no tracebacks.
</verification>

<success_criteria>
- `uv sync` exits 0 with the project installed
- `crypto --help` prints a help message listing `prices`, `watch`, and `info` subcommands
- `crypto prices` exits without error (placeholder output OK)
- `crypto watch --help` shows the `--interval` option with default 30
- `crypto info BTC` exits without error (placeholder output OK)
- No setup.py, setup.cfg, or requirements.txt exist in the project root
- pyproject.toml contains `[project.scripts]` with `crypto = "crypto_tracker.cli:main"`
- .python-version contains `3.12`
</success_criteria>

<output>
After completion, create `.planning/phases/01-project-setup/01-01-SUMMARY.md`
</output>
