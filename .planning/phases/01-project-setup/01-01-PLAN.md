---
phase: 01-project-setup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - pyproject.toml
  - src/crypto_price_tracker/__init__.py
  - src/crypto_price_tracker/cli.py
  - .python-version
autonomous: true
requirements:
  - SETUP-01
  - SETUP-02

must_haves:
  truths:
    - "Running `uv sync` installs the project and all dependencies without error"
    - "Running `crypto --help` after install prints usage information and exits with code 0"
    - "The project has a pyproject.toml with a [project.scripts] entry point mapping `crypto` to the CLI module"
  artifacts:
    - path: "pyproject.toml"
      provides: "Project metadata, dependencies, and CLI entry point"
      contains: "[project.scripts]"
    - path: "src/crypto_price_tracker/__init__.py"
      provides: "Python package marker"
    - path: "src/crypto_price_tracker/cli.py"
      provides: "CLI entry point with main() function"
      exports: ["main"]
      min_lines: 10
  key_links:
    - from: "pyproject.toml"
      to: "src/crypto_price_tracker/cli.py"
      via: "[project.scripts] crypto entry point"
      pattern: 'crypto\s*=\s*"crypto_price_tracker\.cli:main"'
    - from: "src/crypto_price_tracker/cli.py"
      to: "argparse"
      via: "ArgumentParser for --help output"
      pattern: "ArgumentParser|argparse"
---

<objective>
Scaffold a uv-managed Python project with pyproject.toml and an installable `crypto` CLI entry point that prints usage on `--help`.

Purpose: Establish the project foundation so all subsequent phases have a working package to build on. After this plan, `crypto` is a real command that runs.
Output: pyproject.toml, Python package with CLI skeleton, uv lockfile
</objective>

<execution_context>
@/home/james-turing/.claude/get-shit-done/workflows/execute-plan.md
@/home/james-turing/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create pyproject.toml and initialize uv project</name>
  <files>pyproject.toml, .python-version</files>
  <action>
Create `pyproject.toml` with the following configuration:

- `[project]` section:
  - `name = "crypto-price-tracker"`
  - `version = "0.1.0"`
  - `description = "A CLI tool to display cryptocurrency prices from the Bitvavo API"`
  - `requires-python = ">=3.12"`
  - `dependencies = []` (empty for now — dependencies added in later phases)

- `[project.scripts]` section:
  - `crypto = "crypto_price_tracker.cli:main"`

- `[build-system]` section:
  - `requires = ["hatchling"]`
  - `build-backend = "hatchling.build"`

Create `.python-version` with content `3.12` (for uv to pick up the Python version).

Do NOT create setup.py, setup.cfg, or requirements.txt — uv + pyproject.toml only.
Do NOT use a src layout hatch configuration — use the default `src/` layout by adding:
```toml
[tool.hatch.build.targets.wheel]
packages = ["src/crypto_price_tracker"]
```
  </action>
  <verify>
    <automated>test -f pyproject.toml && grep -q '\[project.scripts\]' pyproject.toml && grep -q 'crypto' pyproject.toml && echo "PASS" || echo "FAIL"</automated>
  </verify>
  <done>pyproject.toml exists with [project.scripts] mapping `crypto` to `crypto_price_tracker.cli:main`, build system uses hatchling, no setup.py or requirements.txt present</done>
</task>

<task type="auto">
  <name>Task 2: Create Python package with CLI entry point and run uv sync</name>
  <files>src/crypto_price_tracker/__init__.py, src/crypto_price_tracker/cli.py</files>
  <action>
Create directory `src/crypto_price_tracker/`.

Create `src/crypto_price_tracker/__init__.py`:
- Set `__version__ = "0.1.0"`
- Nothing else needed.

Create `src/crypto_price_tracker/cli.py`:
- Import `argparse` from stdlib.
- Define a `main()` function that:
  1. Creates an `ArgumentParser` with `prog="crypto"` and `description="Cryptocurrency price tracker — live prices from the Bitvavo API"`
  2. Adds a subparsers group with `dest="command"` for future subcommands (prices, watch, info). Do NOT implement subcommands yet — just register the subparsers group so the help text shows "positional arguments: {command}" placeholder.
  3. Parses args with `parser.parse_args()`
  4. If no command provided, calls `parser.print_help()` and exits
- Add `if __name__ == "__main__": main()` guard.

After creating files, run:
```bash
uv sync
```

Then verify the installation:
```bash
uv run crypto --help
```

The help output should show the program description and available options.
  </action>
  <verify>
    <automated>cd /home/james-turing/repos/crypto-price-tracker-v2 && uv sync 2>&1 && uv run crypto --help 2>&1 | grep -q "crypto" && echo "PASS" || echo "FAIL"</automated>
  </verify>
  <done>`uv sync` succeeds without error, `uv run crypto --help` prints usage showing the program name and description, exit code is 0</done>
</task>

</tasks>

<verification>
Run these commands sequentially to verify the phase is complete:

1. `uv sync` — must complete without error
2. `uv run crypto --help` — must print usage with "crypto" in output
3. `test -f pyproject.toml` — must exist
4. `grep -q '[project.scripts]' pyproject.toml` — must have entry point section
5. `test ! -f setup.py && test ! -f requirements.txt` — must NOT have legacy files
</verification>

<success_criteria>
1. `uv sync` installs the project without error
2. `crypto --help` (via `uv run`) prints usage information and exits cleanly
3. pyproject.toml contains `[project.scripts]` with `crypto = "crypto_price_tracker.cli:main"`
4. No setup.py or requirements.txt exists
5. Python package structure at `src/crypto_price_tracker/` with `__init__.py` and `cli.py`
</success_criteria>

<output>
After completion, create `.planning/phases/01-project-setup/01-01-SUMMARY.md`
</output>
