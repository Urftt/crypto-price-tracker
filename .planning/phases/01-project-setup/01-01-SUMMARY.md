---
phase: 01-project-setup
plan: 01
subsystem: infra
tags: [uv, python, pyproject, hatchling, argparse, cli]

# Dependency graph
requires: []
provides:
  - "uv-managed Python 3.12 project with pyproject.toml"
  - "Installable `crypto` CLI entry point via [project.scripts]"
  - "argparse-based CLI skeleton with subparser stubs (prices, watch, info)"
  - "uv.lock lockfile for reproducible installs"
affects: [02-api-integration, 03-cli-display]

# Tech tracking
tech-stack:
  added: [uv, hatchling, argparse (stdlib)]
  patterns:
    - "src/ layout with src/crypto_price_tracker/ package directory"
    - "pyproject.toml-only project configuration (no setup.py, no requirements.txt)"
    - "CLI entry point via [project.scripts] mapped to crypto_price_tracker.cli:main"

key-files:
  created:
    - pyproject.toml
    - .python-version
    - .gitignore
    - src/crypto_price_tracker/__init__.py
    - src/crypto_price_tracker/cli.py
    - uv.lock
  modified: []

key-decisions:
  - "Used hatchling as build backend with explicit src/ layout configuration in [tool.hatch.build.targets.wheel]"
  - "CLI uses argparse with subparsers group registered at startup so help output shows all future subcommand slots"
  - "Installed uv 0.10.7 via official installer (was not pre-installed in environment)"

patterns-established:
  - "All Python execution via `uv run` or `uv sync` — never direct python/pip invocations"
  - "CLI main() registered subparsers before argument parsing — future phases add subcommand implementations to existing stubs"

requirements-completed: [SETUP-01, SETUP-02]

# Metrics
duration: 5min
completed: 2026-03-01
---

# Phase 1 Plan 01: Project Setup Summary

**uv-managed Python 3.12 project with hatchling build backend, pyproject.toml entry point, and argparse CLI skeleton exposing `crypto prices|watch|info` subcommand stubs**

## Performance

- **Duration:** ~5 min
- **Started:** 2026-02-28T23:57:34Z
- **Completed:** 2026-03-01T00:00:00Z
- **Tasks:** 2
- **Files modified:** 6

## Accomplishments

- Working `crypto` CLI command installable via `uv sync` and runnable via `uv run crypto --help`
- pyproject.toml with [project.scripts] entry point, hatchling build backend, and src/ layout
- argparse CLI skeleton with subparser stubs for prices, watch, and info subcommands
- uv.lock for reproducible dependency installs

## Task Commits

Each task was committed atomically:

1. **Task 1: Create pyproject.toml and initialize uv project** - `d556969` (chore)
2. **Task 2: Create Python package with CLI entry point and run uv sync** - `a3b668b` (feat)

## Files Created/Modified

- `pyproject.toml` - Project metadata, hatchling build config, and `crypto` CLI entry point
- `.python-version` - Pins Python 3.12 for uv
- `.gitignore` - Excludes .venv, __pycache__, and build artifacts
- `src/crypto_price_tracker/__init__.py` - Package marker with `__version__ = "0.1.0"`
- `src/crypto_price_tracker/cli.py` - argparse-based main() with prices/watch/info subparser stubs
- `uv.lock` - Lock file generated by uv sync

## Decisions Made

- Used hatchling as build backend with explicit `packages = ["src/crypto_price_tracker"]` in `[tool.hatch.build.targets.wheel]` as required by the plan for correct src/ layout discovery
- CLI registers all three subcommand stubs (prices, watch, info) upfront so `--help` shows the full command surface without any implementation
- SystemExit(0) called explicitly when no subcommand is given so behavior is well-defined

## Deviations from Plan

### Auto-fixed Issues

**1. [Rule 3 - Blocking] Installed uv via official installer**
- **Found during:** Task 2 (run uv sync)
- **Issue:** `uv` command not found in PATH — the uv tool was not pre-installed in the environment
- **Fix:** Ran `curl -LsSf https://astral.sh/uv/install.sh | sh` to install uv 0.10.7 to `~/.local/bin`
- **Files modified:** None (system-level tool install, not tracked in repo)
- **Verification:** `uv sync` completed and created .venv; `uv run crypto --help` printed usage correctly
- **Committed in:** a3b668b (Task 2 commit — uv.lock included)

**2. [Rule 2 - Missing Critical] Added .gitignore to exclude .venv and build artifacts**
- **Found during:** Task 2 (after uv sync created .venv)
- **Issue:** No .gitignore existed; uv sync created .venv which would have been committed without one
- **Fix:** Created .gitignore excluding .venv/, __pycache__/, *.egg-info/, dist/, build/, and .env files
- **Files modified:** .gitignore (created)
- **Verification:** `git status` shows .venv as untracked and ignored
- **Committed in:** a3b668b (Task 2 commit)

---

**Total deviations:** 2 auto-fixed (1 blocking, 1 missing critical)
**Impact on plan:** Both auto-fixes essential for environment setup and repository hygiene. No scope creep.

## Issues Encountered

- uv was not installed in the execution environment. Installed it via the official installer. All subsequent uv commands used absolute path `/home/james-turing/.local/bin/uv` since PATH export doesn't persist between Bash tool calls.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

- Phase 2 (API Integration) can begin immediately — `uv sync` works, package structure is in place
- Dependencies for Phase 2 (httpx or requests for HTTP) should be added to `pyproject.toml` `dependencies = []` list
- The CLI subcommand stubs (prices, watch, info) are placeholders; Phase 3 will implement their `add_parser` handlers

---
*Phase: 01-project-setup*
*Completed: 2026-03-01*
